#!/usr/bin/env python3

from plaza_matrix_service import MatrixService
from plaza_matrix_service import PlazaBot
import logging
import asyncio
import sys

MATRIX_INSTANCE = "https://matrix.codigoparallevar.com"
USER = "plaza-bot"
PASSWORD = "<nocommit>"  #NOCOMMIT


if __name__ == "__main__":
    if len(sys.argv) != 2:
        print("{} <service-operation-url>".format(sys.argv[0]))
        exit(0)

    logging.basicConfig(level=logging.INFO,
                        format='%(levelname)-8s %(message)s')

    print("Connecting as: {}".format(USER))
    matrix = PlazaBot(USER, PASSWORD, MATRIX_INSTANCE)
    service = MatrixService(matrix, sys.argv[1])
    service.run()
