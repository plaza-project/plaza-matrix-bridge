#!/usr/bin/env python3

from plaza_matrix_service import MatrixService
from plaza_matrix_service import PlazaBot
from plaza_matrix_service import config
from plaza_matrix_service.storage import sqlite_storage
import logging

if __name__ == "__main__":
    logging.basicConfig(level=logging.INFO,
                        format='%(levelname)-8s %(message)s')

    matrix_instance = config.get_matrix_instance()
    user = config.get_user()
    password = config.get_password()
    bridge_endpoint = config.get_bridge_endpoint()

    matrix = PlazaBot(user, password, matrix_instance)
    service = MatrixService(
        matrix, sqlite_storage.get_default(), bridge_endpoint)
    service.run()
